{% extends "base.html" %}
{% load crispy_forms_filters %}

{% block content %}
	<main style="height: 95%" class="d-flex flex-column align-items-center justify-content-center bg-dark text-light">
		<div class="container py-5">
			<h3 class="text-light text-center mb-5"><em class="text-warning h3">My Habit List</em></h3></h3>
		<em class="text-warning col-md-4">Available habits: {{ num_user_habits }}</em>
			<div class="d-flex justify-content-between align-items-center my-3">
				<a href="{% url "my-habits-create" %}" class="btn btn-outline-warning">Create my habit</a>
				<a href="{% url 'all-habits' %}" class="btn btn-outline-warning">Go to all habits</a>
			</div>
			<form style="margin: auto; width: 20%; padding-bottom: 20px" class="form-inline" method="get" action="">
				<div class="input-group">
					<input type="text" class="form-control" name="name" placeholder="Search by name"
								 aria-label="Search">
					<div class="input-group-append">
						<button class="btn btn-warning" type="submit">Search</button>
					</div>
				</div>
			</form>
			<div class="progress mb-4" style="height: .4rem; background-color: aqua;"></div>
			<div class="table-responsive">
				<table class="table table-dark table-hover text-light rounded shadow">
					<thead class="thead-light">
					<tr>
						<th>Name</th>
						<th>Description</th>
						<th>Days to Achieve</th>
						<th>Date of Assign</th>
						<th>Achieved Habit</th>
						<th class="actions-column">Edit</th>
						<th class="actions-column">Remove from list</th>
					</tr>
					</thead>
					<tbody>
					{% for detail in user_habit_details %}
						<tr>
							<td>{{ detail.user_habit.habit.name }}</td>
							<td style="padding-left: 30px" height="30">
								{{ detail.user_habit.habit.description }}
							</td>
							<td style="padding-left: 55px">
								{% if detail.days_to_achieve > 0 %}
									{{ detail.days_to_achieve }}
								{% else %}
									Completed
								{% endif %}
							</td>
							<td>{{ detail.user_habit.date_of_assign }}</td>
							<td style="padding-left: 50px">
								{{ detail.achieved_habit_is_true }}
							</td>
							<td style="padding-right: 20px" class="actions-column">
								<a href="{% url "update-habit" detail.user_habit.habit.pk %}" class="btn btn-outline-primary btn-sm">Edit</a>
							</td>
							<td style="padding-left: 40px">
								<a href="{% url "remove-habit" detail.user_habit.habit.pk %}" class="btn btn-outline-danger btn-sm">Remove</a>
							</td>
						</tr>
					{% empty %}
						<tr>
							<td colspan="6" class="text-center">No habits available</td>
						</tr>
					{% endfor %}
					</tbody>
				</table>
			</div>
		</div>
	</main>
{% endblock %}
